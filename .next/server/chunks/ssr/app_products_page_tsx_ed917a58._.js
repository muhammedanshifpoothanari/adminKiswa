module.exports=[22674,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(40695),e=a.i(3130),f=a.i(65733),g=a.i(5522),h=a.i(17171),i=a.i(87682),j=a.i(54161),k=a.i(46893),l=a.i(15618),m=a.i(99464),n=a.i(81560),o=a.i(78612),p=a.i(67329),q=a.i(77156),r=a.i(33508),s=a.i(84505);function t(){let[a,t]=(0,c.useState)([]),[u,v]=(0,c.useState)([]),[w,x]=(0,c.useState)(!1),[y,z]=(0,c.useState)(!1),[A,B]=(0,c.useState)(null),[C,D]=(0,c.useState)(!1),[E,F]=(0,c.useState)("grid"),[G,H]=(0,c.useState)({name:"",slug:"",sku:"",description:"",features:[""],price:0,currency:"SAR",stock:0,inStock:!0,categoryId:"",images:[""],specifications:[{key:"",value:""}],isPublished:!0,isFeatured:!1,isBestSeller:!1}),[I,J]=(0,c.useState)(null);async function K(){let a=await fetch("/api/products");a.ok&&t(await a.json())}async function L(){let a=await fetch("/api/categories");a.ok&&v(await a.json())}async function M(a){a.preventDefault(),D(!0);try{let a=I?`/api/products/${I}`:"/api/products",b={};G.specifications.forEach(a=>{a.key&&(b[a.key]=a.value)});let c={name:G.name,slug:G.slug,sku:G.sku,description:G.description,features:G.features.filter(a=>a.trim()),price:G.price,currency:G.currency,stock:G.stock,inStock:G.inStock,category:G.categoryId,images:G.images.filter(a=>a.trim()),specifications:b,isPublished:G.isPublished,isFeatured:G.isFeatured,isBestSeller:G.isBestSeller};(await fetch(a,{method:I?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)})).ok&&(x(!1),O(),K())}catch(a){console.error(a)}finally{D(!1)}}async function N(a){!confirm("Are you sure you want to delete this product?")||(await fetch(`/api/products/${a}`,{method:"DELETE"})).ok&&K()}function O(){H({name:"",slug:"",sku:"",description:"",features:[""],price:0,currency:"SAR",stock:0,inStock:!0,categoryId:"",images:[""],specifications:[{key:"",value:""}],isPublished:!0,isFeatured:!1,isBestSeller:!1}),J(null)}function P(a){H({name:a.name,slug:a.slug,sku:a.sku||"",description:a.description||"",features:a.features?.length?a.features:[""],price:a.price,currency:a.currency||"SAR",stock:a.stock,inStock:a.inStock,categoryId:a.category?._id||"",images:a.images?.length?a.images:[""],specifications:Object.entries(a.specifications||{}).map(([a,b])=>({key:a,value:b})),isPublished:a.isPublished,isFeatured:a.isFeatured||!1,isBestSeller:a.isBestSeller||!1}),J(a._id),x(!0)}function Q(a,b,c){let d=[...G.specifications];d[a][b]=c,H({...G,specifications:d})}return(0,c.useEffect)(()=>{K(),L()},[]),(0,b.jsxs)("div",{className:"p-8 space-y-6",children:[(0,b.jsxs)("div",{className:"flex justify-between items-center",children:[(0,b.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:"Products"}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)(d.Button,{variant:"grid"===E?"default":"outline",size:"icon",onClick:()=>F("grid"),children:(0,b.jsx)(o.Grid,{className:"h-4 w-4"})}),(0,b.jsx)(d.Button,{variant:"list"===E?"default":"outline",size:"icon",onClick:()=>F("list"),children:(0,b.jsx)(p.List,{className:"h-4 w-4"})}),(0,b.jsx)(d.Button,{asChild:!0,variant:"outline",children:(0,b.jsxs)("a",{href:"/products/catalog",children:[(0,b.jsx)(s.Download,{className:"mr-2 h-4 w-4"})," Catalog"]})}),(0,b.jsxs)(f.Dialog,{open:w,onOpenChange:a=>{a||O(),x(a)},children:[(0,b.jsx)(f.DialogTrigger,{asChild:!0,children:(0,b.jsxs)(d.Button,{children:[(0,b.jsx)(l.Plus,{className:"mr-2 h-4 w-4"})," Add Product"]})}),(0,b.jsxs)(f.DialogContent,{className:"max-w-3xl max-h-[90vh] overflow-y-auto",children:[(0,b.jsx)(f.DialogHeader,{children:(0,b.jsx)(f.DialogTitle,{children:I?"Edit Product":"Add New Product"})}),(0,b.jsxs)("form",{onSubmit:M,className:"space-y-6",children:[(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(h.Label,{children:"Name"}),(0,b.jsx)(g.Input,{value:G.name,onChange:a=>H({...G,name:a.target.value,slug:a.target.value.toLowerCase().replace(/ /g,"-")}),required:!0})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(h.Label,{children:"Slug (URL)"}),(0,b.jsx)(g.Input,{value:G.slug,onChange:a=>H({...G,slug:a.target.value}),required:!0})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(h.Label,{children:"SKU"}),(0,b.jsx)(g.Input,{value:G.sku,onChange:a=>H({...G,sku:a.target.value}),required:!0})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(h.Label,{children:"Category"}),(0,b.jsxs)(i.Select,{value:G.categoryId,onValueChange:a=>H({...G,categoryId:a}),children:[(0,b.jsx)(i.SelectTrigger,{children:(0,b.jsx)(i.SelectValue,{placeholder:"Select Category"})}),(0,b.jsx)(i.SelectContent,{children:u.map(a=>(0,b.jsx)(i.SelectItem,{value:a._id,children:a.name},a._id))})]})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(h.Label,{children:"Price"}),(0,b.jsx)(g.Input,{type:"number",value:G.price,onChange:a=>H({...G,price:parseFloat(a.target.value)}),required:!0})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(h.Label,{children:"Currency"}),(0,b.jsxs)(i.Select,{value:G.currency,onValueChange:a=>H({...G,currency:a}),children:[(0,b.jsx)(i.SelectTrigger,{children:(0,b.jsx)(i.SelectValue,{})}),(0,b.jsxs)(i.SelectContent,{children:[(0,b.jsx)(i.SelectItem,{value:"SAR",children:"SAR"}),(0,b.jsx)(i.SelectItem,{value:"USD",children:"USD"}),(0,b.jsx)(i.SelectItem,{value:"AED",children:"AED"})]})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(h.Label,{children:"Stock"}),(0,b.jsx)(g.Input,{type:"number",value:G.stock,onChange:a=>H({...G,stock:parseInt(a.target.value),inStock:parseInt(a.target.value)>0}),required:!0})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(h.Label,{children:"Description"}),(0,b.jsx)(k.Textarea,{value:G.description,onChange:a=>H({...G,description:a.target.value}),rows:3})]}),(0,b.jsxs)("div",{className:"grid grid-cols-3 gap-4 p-4 border rounded-lg bg-gray-50",children:[(0,b.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,b.jsx)("input",{type:"checkbox",id:"isPublished",checked:G.isPublished,onChange:a=>H({...G,isPublished:a.target.checked}),className:"h-4 w-4 rounded border-gray-300 text-black focus:ring-black"}),(0,b.jsx)(h.Label,{htmlFor:"isPublished",className:"cursor-pointer",children:"Published"})]}),(0,b.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,b.jsx)("input",{type:"checkbox",id:"isFeatured",checked:G.isFeatured,onChange:a=>H({...G,isFeatured:a.target.checked}),className:"h-4 w-4 rounded border-gray-300 text-black focus:ring-black"}),(0,b.jsx)(h.Label,{htmlFor:"isFeatured",className:"cursor-pointer",children:"Featured"})]}),(0,b.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,b.jsx)("input",{type:"checkbox",id:"isBestSeller",checked:G.isBestSeller,onChange:a=>H({...G,isBestSeller:a.target.checked}),className:"h-4 w-4 rounded border-gray-300 text-black focus:ring-black"}),(0,b.jsx)(h.Label,{htmlFor:"isBestSeller",className:"cursor-pointer",children:"Best Seller"})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)("div",{className:"flex justify-between items-center",children:[(0,b.jsx)(h.Label,{children:"Features"}),(0,b.jsxs)(d.Button,{type:"button",variant:"ghost",size:"sm",onClick:function(){H({...G,features:[...G.features,""]})},children:[(0,b.jsx)(l.Plus,{className:"h-3 w-3 mr-1"}),"Add"]})]}),G.features.map((a,c)=>(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)(g.Input,{value:a,onChange:a=>{var b;let d;return b=a.target.value,void((d=[...G.features])[c]=b,H({...G,features:d}))},placeholder:`Feature ${c+1}`}),G.features.length>1&&(0,b.jsx)(d.Button,{type:"button",variant:"ghost",size:"icon",onClick:()=>{H({...G,features:G.features.filter((a,b)=>b!==c)})},children:(0,b.jsx)(r.X,{className:"h-4 w-4"})})]},c))]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)("div",{className:"flex justify-between items-center",children:[(0,b.jsx)(h.Label,{children:"Image URLs"}),(0,b.jsxs)(d.Button,{type:"button",variant:"ghost",size:"sm",onClick:function(){H({...G,images:[...G.images,""]})},children:[(0,b.jsx)(l.Plus,{className:"h-3 w-3 mr-1"}),"Add"]})]}),G.images.map((a,c)=>(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)(g.Input,{value:a,onChange:a=>{var b;let d;return b=a.target.value,void((d=[...G.images])[c]=b,H({...G,images:d}))},placeholder:"https://..."}),G.images.length>1&&(0,b.jsx)(d.Button,{type:"button",variant:"ghost",size:"icon",onClick:()=>{H({...G,images:G.images.filter((a,b)=>b!==c)})},children:(0,b.jsx)(r.X,{className:"h-4 w-4"})})]},c))]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)("div",{className:"flex justify-between items-center",children:[(0,b.jsx)(h.Label,{children:"Specifications"}),(0,b.jsxs)(d.Button,{type:"button",variant:"ghost",size:"sm",onClick:function(){H({...G,specifications:[...G.specifications,{key:"",value:""}]})},children:[(0,b.jsx)(l.Plus,{className:"h-3 w-3 mr-1"}),"Add"]})]}),G.specifications.map((a,c)=>(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,b.jsx)(g.Input,{value:a.key,onChange:a=>Q(c,"key",a.target.value),placeholder:"Key (e.g., Material)"}),(0,b.jsx)(g.Input,{value:a.value,onChange:a=>Q(c,"value",a.target.value),placeholder:"Value"})]},c))]}),(0,b.jsx)(d.Button,{type:"submit",disabled:C,className:"w-full",children:C?"Saving...":I?"Update Product":"Create Product"})]})]})]})]})]}),"grid"===E?(0,b.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:a.map(a=>(0,b.jsxs)(e.Card,{className:"overflow-hidden group cursor-pointer",onClick:()=>{B(a),z(!0)},children:[(0,b.jsxs)("div",{className:"aspect-square bg-gray-100 relative",children:[a.images?.[0]?(0,b.jsx)("img",{src:a.images[0],alt:a.name,className:"w-full h-full object-cover"}):(0,b.jsx)("div",{className:"w-full h-full flex items-center justify-center text-gray-400",children:"No Image"}),(0,b.jsxs)("div",{className:"absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center gap-2",children:[(0,b.jsx)(d.Button,{size:"icon",variant:"secondary",onClick:b=>{b.stopPropagation(),P(a)},children:(0,b.jsx)(m.Pencil,{className:"h-4 w-4"})}),(0,b.jsx)(d.Button,{size:"icon",variant:"destructive",onClick:b=>{b.stopPropagation(),N(a._id)},children:(0,b.jsx)(n.Trash2,{className:"h-4 w-4"})})]})]}),(0,b.jsxs)(e.CardContent,{className:"p-3",children:[(0,b.jsx)("h3",{className:"font-semibold text-sm truncate",children:a.name}),(0,b.jsxs)("p",{className:"text-sm text-muted-foreground",children:[a.price," ",a.currency]})]})]},a._id))}):(0,b.jsxs)(e.Card,{children:[(0,b.jsx)(e.CardHeader,{children:(0,b.jsx)(e.CardTitle,{children:"Inventory"})}),(0,b.jsx)(e.CardContent,{children:(0,b.jsxs)("table",{className:"w-full text-sm",children:[(0,b.jsx)("thead",{children:(0,b.jsxs)("tr",{className:"border-b",children:[(0,b.jsx)("th",{className:"text-left py-2",children:"Name"}),(0,b.jsx)("th",{className:"text-left py-2",children:"SKU"}),(0,b.jsx)("th",{className:"text-left py-2",children:"Category"}),(0,b.jsx)("th",{className:"text-left py-2",children:"Price"}),(0,b.jsx)("th",{className:"text-left py-2",children:"Stock"}),(0,b.jsx)("th",{className:"text-right py-2",children:"Actions"})]})}),(0,b.jsx)("tbody",{children:a.map(a=>(0,b.jsxs)("tr",{className:"border-b",children:[(0,b.jsx)("td",{className:"py-2 font-medium",children:a.name}),(0,b.jsx)("td",{className:"py-2",children:a.sku}),(0,b.jsx)("td",{className:"py-2",children:a.category?.name}),(0,b.jsxs)("td",{className:"py-2",children:[a.price," ",a.currency]}),(0,b.jsx)("td",{className:"py-2",children:(0,b.jsx)(j.Badge,{variant:a.stock>0?"default":"destructive",children:a.stock>0?a.stock:"Out"})}),(0,b.jsxs)("td",{className:"py-2 text-right space-x-1",children:[(0,b.jsx)(d.Button,{variant:"ghost",size:"icon",onClick:()=>{B(a),z(!0)},children:(0,b.jsx)(q.Eye,{className:"h-4 w-4"})}),(0,b.jsx)(d.Button,{variant:"ghost",size:"icon",onClick:()=>P(a),children:(0,b.jsx)(m.Pencil,{className:"h-4 w-4"})}),(0,b.jsx)(d.Button,{variant:"ghost",size:"icon",onClick:()=>N(a._id),children:(0,b.jsx)(n.Trash2,{className:"h-4 w-4"})})]})]},a._id))})]})})]}),(0,b.jsx)(f.Dialog,{open:y,onOpenChange:z,children:(0,b.jsxs)(f.DialogContent,{className:"max-w-2xl",children:[(0,b.jsx)(f.DialogHeader,{children:(0,b.jsx)(f.DialogTitle,{children:"Product Details"})}),A&&(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)("div",{className:"grid grid-cols-2 gap-4",children:A.images?.map((a,c)=>(0,b.jsx)("img",{src:a,alt:"",className:"w-full aspect-square object-cover rounded"},c))}),(0,b.jsx)("h2",{className:"text-xl font-bold",children:A.name}),(0,b.jsxs)("p",{className:"text-2xl font-semibold",children:[A.price," ",A.currency]}),(0,b.jsx)("p",{className:"text-muted-foreground",children:A.description}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h4",{className:"font-semibold mb-2",children:"Features:"}),(0,b.jsx)("ul",{className:"list-disc list-inside",children:A.features?.map((a,c)=>(0,b.jsx)("li",{children:a},c))})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h4",{className:"font-semibold mb-2",children:"Specifications:"}),(0,b.jsx)("div",{className:"grid grid-cols-2 gap-2",children:Object.entries(A.specifications||{}).map(([a,c])=>(0,b.jsxs)("div",{children:[(0,b.jsxs)("span",{className:"text-muted-foreground",children:[a,":"]})," ",c]},a))})]})]})]})})]})}a.s(["default",()=>t])}];

//# sourceMappingURL=app_products_page_tsx_ed917a58._.js.map