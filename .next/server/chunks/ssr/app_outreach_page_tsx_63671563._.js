module.exports=[72573,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(40695),e=a.i(3130),f=a.i(88237),g=a.i(65733),h=a.i(5522),i=a.i(17171),j=a.i(87682),k=a.i(46893),l=a.i(54161),m=a.i(15618),n=a.i(77156),o=a.i(81560),p=a.i(63519),q=a.i(92258),r=a.i(41675),s=a.i(60246);let t=["call","email","meeting","demo","follow-up"];function u(){let[a,u]=(0,c.useState)([]),[v,w]=(0,c.useState)([]),[x,y]=(0,c.useState)([]),[z,A]=(0,c.useState)(!1),[B,C]=(0,c.useState)(!1),[D,E]=(0,c.useState)(null),[F,G]=(0,c.useState)(()=>{let a=new Date;return`${a.getFullYear()}-${String(a.getMonth()+1).padStart(2,"0")}`}),[H,I]=(0,c.useState)({companyId:"",employeeId:"",month:F,status:"active",notes:"",activities:[{type:"call",date:new Date().toISOString().split("T")[0],notes:"",outcome:""}]});async function J(){let a=await fetch(`/api/outreach?month=${F}`);a.ok&&u(await a.json())}async function K(){let a=await fetch("/api/crm/companies");if(a.ok){let b=await a.json();w(Array.isArray(b)?b:[])}}async function L(){let a=await fetch("/api/employees");a.ok&&y(await a.json())}async function M(a){a.preventDefault();let[b,c]=H.month.split("-").map(Number),d={company:H.companyId,employee:H.employeeId,month:new Date(b,c-1,1),status:H.status,notes:H.notes,activities:H.activities.filter(a=>a.notes)};(await fetch("/api/outreach",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(d)})).ok&&(A(!1),O(),J())}async function N(a){confirm("Delete this outreach record?")&&(await fetch(`/api/outreach/${a}`,{method:"DELETE"}),J())}function O(){I({companyId:"",employeeId:"",month:F,status:"active",notes:"",activities:[{type:"call",date:new Date().toISOString().split("T")[0],notes:"",outcome:""}]})}function P(a,b,c){let d=[...H.activities];d[a][b]=c,I({...H,activities:d})}function Q(a){switch(a){case"active":return"default";case"completed":default:return"secondary";case"paused":return"outline"}}function R(a){switch(a){case"call":return(0,b.jsx)(p.Phone,{className:"h-3 w-3"});case"email":return(0,b.jsx)(q.Mail,{className:"h-3 w-3"});case"meeting":return(0,b.jsx)(s.Users,{className:"h-3 w-3"});default:return(0,b.jsx)(r.Calendar,{className:"h-3 w-3"})}}return(0,c.useEffect)(()=>{K(),L()},[]),(0,c.useEffect)(()=>{J()},[F]),(0,b.jsxs)("div",{className:"p-8 space-y-6",children:[(0,b.jsxs)("div",{className:"flex justify-between items-center",children:[(0,b.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:"Outreach Tracking"}),(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)(h.Input,{type:"month",value:F,onChange:a=>G(a.target.value),className:"w-48"}),(0,b.jsxs)(g.Dialog,{open:z,onOpenChange:a=>{a||O(),A(a)},children:[(0,b.jsx)(g.DialogTrigger,{asChild:!0,children:(0,b.jsxs)(d.Button,{children:[(0,b.jsx)(m.Plus,{className:"mr-2 h-4 w-4"})," New Outreach"]})}),(0,b.jsxs)(g.DialogContent,{className:"max-w-lg max-h-[90vh] overflow-y-auto",children:[(0,b.jsx)(g.DialogHeader,{children:(0,b.jsx)(g.DialogTitle,{children:"Create Outreach Record"})}),(0,b.jsxs)("form",{onSubmit:M,className:"space-y-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(i.Label,{children:"Company"}),(0,b.jsxs)(j.Select,{value:H.companyId,onValueChange:a=>I({...H,companyId:a}),children:[(0,b.jsx)(j.SelectTrigger,{children:(0,b.jsx)(j.SelectValue,{placeholder:"Select Company"})}),(0,b.jsx)(j.SelectContent,{children:v.map(a=>(0,b.jsx)(j.SelectItem,{value:a._id,children:a.name},a._id))})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(i.Label,{children:"Assigned Employee"}),(0,b.jsxs)(j.Select,{value:H.employeeId,onValueChange:a=>I({...H,employeeId:a}),children:[(0,b.jsx)(j.SelectTrigger,{children:(0,b.jsx)(j.SelectValue,{placeholder:"Select Employee"})}),(0,b.jsx)(j.SelectContent,{children:x.map(a=>(0,b.jsxs)(j.SelectItem,{value:a._id,children:[a.firstName," ",a.lastName]},a._id))})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(i.Label,{children:"Month"}),(0,b.jsx)(h.Input,{type:"month",value:H.month,onChange:a=>I({...H,month:a.target.value})})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(i.Label,{children:"Status"}),(0,b.jsxs)(j.Select,{value:H.status,onValueChange:a=>I({...H,status:a}),children:[(0,b.jsx)(j.SelectTrigger,{children:(0,b.jsx)(j.SelectValue,{})}),(0,b.jsxs)(j.SelectContent,{children:[(0,b.jsx)(j.SelectItem,{value:"active",children:"Active"}),(0,b.jsx)(j.SelectItem,{value:"completed",children:"Completed"}),(0,b.jsx)(j.SelectItem,{value:"paused",children:"Paused"})]})]})]})]}),(0,b.jsxs)("div",{className:"space-y-2 border-t pt-4",children:[(0,b.jsxs)("div",{className:"flex justify-between items-center",children:[(0,b.jsx)(i.Label,{children:"Activities"}),(0,b.jsxs)(d.Button,{type:"button",variant:"ghost",size:"sm",onClick:function(){I({...H,activities:[...H.activities,{type:"call",date:new Date().toISOString().split("T")[0],notes:"",outcome:""}]})},children:[(0,b.jsx)(m.Plus,{className:"h-3 w-3 mr-1"})," Add"]})]}),H.activities.map((a,c)=>(0,b.jsxs)(e.Card,{className:"p-3",children:[(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,b.jsxs)(j.Select,{value:a.type,onValueChange:a=>P(c,"type",a),children:[(0,b.jsx)(j.SelectTrigger,{children:(0,b.jsx)(j.SelectValue,{})}),(0,b.jsx)(j.SelectContent,{children:t.map(a=>(0,b.jsx)(j.SelectItem,{value:a,className:"capitalize",children:a},a))})]}),(0,b.jsx)(h.Input,{type:"date",value:a.date,onChange:a=>P(c,"date",a.target.value)})]}),(0,b.jsx)(k.Textarea,{placeholder:"Activity notes...",value:a.notes,onChange:a=>P(c,"notes",a.target.value),className:"mt-2",rows:2}),(0,b.jsx)(h.Input,{placeholder:"Outcome (optional)",value:a.outcome,onChange:a=>P(c,"outcome",a.target.value),className:"mt-2"})]},c))]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(i.Label,{children:"General Notes"}),(0,b.jsx)(k.Textarea,{value:H.notes,onChange:a=>I({...H,notes:a.target.value})})]}),(0,b.jsx)(d.Button,{type:"submit",className:"w-full",children:"Create Outreach"})]})]})]})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,b.jsxs)(e.Card,{children:[(0,b.jsx)(e.CardHeader,{className:"pb-2",children:(0,b.jsx)(e.CardTitle,{className:"text-sm font-medium",children:"Total Outreach"})}),(0,b.jsx)(e.CardContent,{children:(0,b.jsx)("div",{className:"text-2xl font-bold",children:a.length})})]}),(0,b.jsxs)(e.Card,{children:[(0,b.jsx)(e.CardHeader,{className:"pb-2",children:(0,b.jsx)(e.CardTitle,{className:"text-sm font-medium",children:"Active"})}),(0,b.jsx)(e.CardContent,{children:(0,b.jsx)("div",{className:"text-2xl font-bold text-green-600",children:a.filter(a=>"active"===a.status).length})})]}),(0,b.jsxs)(e.Card,{children:[(0,b.jsx)(e.CardHeader,{className:"pb-2",children:(0,b.jsx)(e.CardTitle,{className:"text-sm font-medium",children:"Completed"})}),(0,b.jsx)(e.CardContent,{children:(0,b.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:a.filter(a=>"completed"===a.status).length})})]}),(0,b.jsxs)(e.Card,{children:[(0,b.jsx)(e.CardHeader,{className:"pb-2",children:(0,b.jsx)(e.CardTitle,{className:"text-sm font-medium",children:"Total Activities"})}),(0,b.jsx)(e.CardContent,{children:(0,b.jsx)("div",{className:"text-2xl font-bold",children:a.reduce((a,b)=>a+(b.activities?.length||0),0)})})]})]}),(0,b.jsxs)(e.Card,{children:[(0,b.jsx)(e.CardHeader,{children:(0,b.jsxs)(e.CardTitle,{children:["Outreach Records - ",F]})}),(0,b.jsx)(e.CardContent,{children:(0,b.jsxs)(f.Table,{children:[(0,b.jsx)(f.TableHeader,{children:(0,b.jsxs)(f.TableRow,{children:[(0,b.jsx)(f.TableHead,{children:"Company"}),(0,b.jsx)(f.TableHead,{children:"Assigned To"}),(0,b.jsx)(f.TableHead,{children:"Activities"}),(0,b.jsx)(f.TableHead,{children:"Status"}),(0,b.jsx)(f.TableHead,{className:"text-right",children:"Actions"})]})}),(0,b.jsxs)(f.TableBody,{children:[a.map(a=>(0,b.jsxs)(f.TableRow,{children:[(0,b.jsxs)(f.TableCell,{className:"font-medium",children:[a.company?.name||"Unknown",(0,b.jsx)("span",{className:"block text-xs text-muted-foreground",children:a.company?.industry})]}),(0,b.jsxs)(f.TableCell,{children:[a.employee?.firstName," ",a.employee?.lastName]}),(0,b.jsx)(f.TableCell,{children:(0,b.jsxs)("div",{className:"flex gap-1",children:[a.activities?.slice(0,3).map((a,c)=>(0,b.jsxs)(l.Badge,{variant:"outline",className:"text-xs",children:[R(a.type)," ",a.type]},c)),a.activities?.length>3&&(0,b.jsxs)(l.Badge,{variant:"secondary",children:["+",a.activities.length-3]})]})}),(0,b.jsx)(f.TableCell,{children:(0,b.jsx)(l.Badge,{variant:Q(a.status),children:a.status})}),(0,b.jsxs)(f.TableCell,{className:"text-right space-x-1",children:[(0,b.jsx)(d.Button,{variant:"ghost",size:"icon",onClick:()=>{E(a),C(!0)},children:(0,b.jsx)(n.Eye,{className:"h-4 w-4"})}),(0,b.jsx)(d.Button,{variant:"ghost",size:"icon",onClick:()=>N(a._id),children:(0,b.jsx)(o.Trash2,{className:"h-4 w-4"})})]})]},a._id)),0===a.length&&(0,b.jsx)(f.TableRow,{children:(0,b.jsx)(f.TableCell,{colSpan:5,className:"text-center py-8 text-muted-foreground",children:"No outreach records for this month"})})]})]})})]}),(0,b.jsx)(g.Dialog,{open:B,onOpenChange:C,children:(0,b.jsxs)(g.DialogContent,{className:"max-w-lg",children:[(0,b.jsx)(g.DialogHeader,{children:(0,b.jsx)(g.DialogTitle,{children:"Outreach Details"})}),D&&(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"font-bold text-lg",children:D.company?.name}),(0,b.jsxs)("p",{className:"text-muted-foreground",children:["Assigned to: ",D.employee?.firstName," ",D.employee?.lastName]}),(0,b.jsx)(l.Badge,{variant:Q(D.status),className:"mt-2",children:D.status})]}),(0,b.jsxs)("div",{className:"border-t pt-4",children:[(0,b.jsx)("h4",{className:"font-semibold mb-2",children:"Activity Timeline"}),(0,b.jsx)("div",{className:"space-y-3",children:D.activities?.map((a,c)=>(0,b.jsxs)("div",{className:"flex gap-3 items-start",children:[(0,b.jsx)("div",{className:"mt-1",children:R(a.type)}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{className:"font-medium capitalize",children:a.type}),(0,b.jsx)("span",{className:"text-xs text-muted-foreground",children:new Date(a.date).toLocaleDateString()})]}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:a.notes}),a.outcome&&(0,b.jsxs)("p",{className:"text-sm text-green-600",children:["Outcome: ",a.outcome]})]})]},c))})]}),D.notes&&(0,b.jsxs)("div",{className:"border-t pt-4",children:[(0,b.jsx)("h4",{className:"font-semibold mb-2",children:"Notes"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:D.notes})]})]})]})})]})}a.s(["default",()=>u])}];

//# sourceMappingURL=app_outreach_page_tsx_63671563._.js.map