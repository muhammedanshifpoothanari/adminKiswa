{"version":3,"sources":["../../../../app/support/messages/page.tsx","../../../../models/Message.ts"],"sourcesContent":["import dbConnect from \"@/lib/mongodb\"\nimport Message from \"@/models/Message\"\nimport { format } from \"date-fns\"\n\nexport const dynamic = \"force-dynamic\"\n\nexport default async function MessagesPage() {\n    await dbConnect()\n    await dbConnect()\n    const messages = await Message.find({}).sort({ createdAt: -1 }).lean()\n\n    return (\n        <div className=\"p-8\">\n            <h1 className=\"text-3xl font-bold mb-8\">Support Messages</h1>\n\n            <div className=\"grid gap-4\">\n                {messages.length === 0 ? (\n                    <div className=\"p-8 text-center bg-white border rounded-lg text-gray-500\">\n                        No messages yet.\n                    </div>\n                ) : (\n                    messages.map((msg: any) => (\n                        <div key={msg._id.toString()} className=\"bg-white border rounded-lg p-6 hover:shadow-sm transition-shadow\">\n                            <div className=\"flex justify-between items-start mb-4\">\n                                <div>\n                                    <h3 className=\"font-bold text-lg\">{msg.subject}</h3>\n                                    <div className=\"flex items-center gap-2 text-sm text-gray-500 mt-1\">\n                                        <span className=\"font-medium text-black\">{msg.name}</span>\n                                        <span>&bull;</span>\n                                        <span>{msg.email}</span>\n                                    </div>\n                                </div>\n                                <div className=\"text-right\">\n                                    <span className={`inline-block px-2.5 py-0.5 rounded-full text-xs font-medium mb-2 ${msg.status === 'unread' ? 'bg-blue-100 text-blue-800' :\n                                        msg.status === 'replied' ? 'bg-green-100 text-green-800' : 'bg-gray-100 text-gray-800'\n                                        }`}>\n                                        {msg.status.toUpperCase()}\n                                    </span>\n                                    <p className=\"text-xs text-gray-400\">\n                                        {format(new Date(msg.createdAt), \"MMM d, yyyy h:mm a\")}\n                                    </p>\n                                </div>\n                            </div>\n                            <p className=\"text-gray-700 bg-gray-50 p-4 rounded text-sm leading-relaxed whitespace-pre-wrap\">\n                                {msg.message}\n                            </p>\n                        </div>\n                    ))\n                )}\n            </div>\n        </div>\n    )\n}\n","import mongoose, { Schema, Document, Model } from \"mongoose\"\n\nexport interface IMessage extends Document {\n    name: string\n    email: string\n    subject: string\n    message: string\n    status: \"unread\" | \"read\" | \"replied\"\n    createdAt: Date\n}\n\nconst MessageSchema = new Schema<IMessage>(\n    {\n        name: { type: String, required: true },\n        email: { type: String, required: true },\n        subject: { type: String, required: true },\n        message: { type: String, required: true },\n        status: { type: String, enum: [\"unread\", \"read\", \"replied\"], default: \"unread\" },\n    },\n    { timestamps: true }\n)\n\n// Prevent overwriting model if already compiled\nconst Message: Model<IMessage> =\n    mongoose.models.Message || mongoose.model<IMessage>(\"Message\", MessageSchema)\n\nexport default Message\n"],"names":[],"mappings":"0bAAA,EAAA,EAAA,CAAA,CAAA,OCAA,EAAA,EAAA,CAAA,CAAA,OAWA,IAAM,EAAgB,IAAI,EAAA,MAAM,CAC5B,CACI,KAAM,CAAE,KAAM,OAAQ,UAAU,CAAK,EACrC,MAAO,CAAE,KAAM,OAAQ,UAAU,CAAK,EACtC,QAAS,CAAE,KAAM,OAAQ,UAAU,CAAK,EACxC,QAAS,CAAE,KAAM,OAAQ,UAAU,CAAK,EACxC,OAAQ,CAAE,KAAM,OAAQ,KAAM,CAAC,SAAU,OAAQ,UAAU,CAAE,QAAS,QAAS,CACnF,EACA,CAAE,WAAY,EAAK,GAIjB,EACF,EAAA,OAAQ,CAAC,MAAM,CAAC,OAAO,EAAI,EAAA,OAAQ,CAAC,KAAK,CAAW,UAAW,GDtBnE,IAAA,EAAA,EAAA,CAAA,CAAA,OAIe,eAAe,IAC1B,MAAM,CAAA,EAAA,EAAA,OAAA,AAAS,IACf,MAAM,CAAA,EAAA,EAAA,OAAA,AAAS,IACf,IAAM,EAAW,MAAM,ACiBZ,EDjBoB,IAAI,CAAC,CAAC,GAAG,IAAI,CAAC,CAAE,UAAW,CAAC,CAAE,GAAG,IAAI,GAEpE,MACI,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,gBACX,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,mCAA0B,qBAExC,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,sBACU,IAApB,EAAS,MAAM,CACZ,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,oEAA2D,qBAI1E,EAAS,GAAG,CAAE,AAAD,GACT,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAA6B,UAAU,6EACpC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,kDACX,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACG,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,6BAAqB,EAAI,OAAO,GAC9C,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,+DACX,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,kCAA0B,EAAI,IAAI,GAClD,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,UAAK,MACN,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,UAAM,EAAI,KAAK,SAGxB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,uBACX,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAW,CAAC,iEAAiE,EAAiB,WAAf,EAAI,MAAM,CAAgB,4BAC5F,YAAf,EAAI,MAAM,CAAiB,8BAAgC,4BAAA,CACzD,UACD,EAAI,MAAM,CAAC,WAAW,KAE3B,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,iCACR,CAAA,EAAA,EAAA,MAAA,AAAM,EAAC,IAAI,KAAK,EAAI,SAAS,EAAG,8BAI7C,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,4FACR,EAAI,OAAO,KAtBV,EAAI,GAAG,CAAC,QAAQ,SA8BlD,kCAhDuB"}