{"version":3,"sources":["../../../../app/customers/subscribers/page.tsx","../../../../models/Subscriber.ts"],"sourcesContent":["import dbConnect from \"@/lib/mongodb\"\nimport Subscriber from \"@/models/Subscriber\"\nimport { format } from \"date-fns\"\n\nexport const dynamic = \"force-dynamic\"\n\nexport default async function SubscribersPage() {\n    await dbConnect()\n    const subscribers = await Subscriber.find({}).sort({ createdAt: -1 }).lean()\n\n    return (\n        <div className=\"p-8\">\n            <h1 className=\"text-3xl font-bold mb-8\">Newsletter Subscribers</h1>\n\n            <div className=\"bg-white rounded-lg border\">\n                <table className=\"w-full text-left text-sm\">\n                    <thead className=\"bg-gray-50 border-b\">\n                        <tr>\n                            <th className=\"px-6 py-4 font-semibold text-gray-900\">Email</th>\n                            <th className=\"px-6 py-4 font-semibold text-gray-900\">Status</th>\n                            <th className=\"px-6 py-4 font-semibold text-gray-900\">Date Subscribed</th>\n                        </tr>\n                    </thead>\n                    <tbody className=\"divide-y\">\n                        {subscribers.length === 0 ? (\n                            <tr>\n                                <td colSpan={3} className=\"px-6 py-8 text-center text-gray-500\">\n                                    No subscribers yet.\n                                </td>\n                            </tr>\n                        ) : (\n                            subscribers.map((sub: any) => (\n                                <tr key={sub._id.toString()}>\n                                    <td className=\"px-6 py-4 font-medium text-gray-900\">{sub.email}</td>\n                                    <td className=\"px-6 py-4\">\n                                        <span className={`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${sub.status === 'subscribed' ? 'bg-green-100 text-green-800' : 'bg-red-100 text-red-800'}`}>\n                                            {sub.status}\n                                        </span>\n                                    </td>\n                                    <td className=\"px-6 py-4 text-gray-500\">\n                                        {format(new Date(sub.createdAt), \"MMM d, yyyy h:mm a\")}\n                                    </td>\n                                </tr>\n                            ))\n                        )}\n                    </tbody>\n                </table>\n            </div>\n        </div>\n    )\n}\n","import mongoose, { Schema, Document, Model } from \"mongoose\"\n\nexport interface ISubscriber extends Document {\n    email: string\n    status: \"subscribed\" | \"unsubscribed\"\n    subscribedAt: Date\n}\n\nconst SubscriberSchema = new Schema<ISubscriber>(\n    {\n        email: { type: String, required: true, unique: true },\n        status: { type: String, enum: [\"subscribed\", \"unsubscribed\"], default: \"subscribed\" },\n        subscribedAt: { type: Date, default: Date.now },\n    },\n    { timestamps: true }\n)\n\n// Prevent overwriting model if already compiled\nconst Subscriber: Model<ISubscriber> =\n    mongoose.models.Subscriber || mongoose.model<ISubscriber>(\"Subscriber\", SubscriberSchema)\n\nexport default Subscriber\n"],"names":[],"mappings":"0bAAA,EAAA,EAAA,CAAA,CAAA,OCAA,EAAA,EAAA,CAAA,CAAA,OAQA,IAAM,EAAmB,IAAI,EAAA,MAAM,CAC/B,CACI,MAAO,CAAE,KAAM,OAAQ,UAAU,EAAM,QAAQ,CAAK,EACpD,OAAQ,CAAE,KAAM,OAAQ,KAAM,CAAC,aAAc,eAAe,CAAE,QAAS,YAAa,EACpF,aAAc,CAAE,KAAM,KAAM,QAAS,KAAK,GAAG,AAAC,CAClD,EACA,CAAE,YAAY,CAAK,GAIjB,EACF,EAAA,OAAQ,CAAC,MAAM,CAAC,UAAU,EAAI,EAAA,OAAQ,CAAC,KAAK,CAAc,aAAc,GDjB5E,IAAA,EAAA,EAAA,CAAA,CAAA,OAIe,eAAe,IAC1B,MAAM,CAAA,EAAA,EAAA,OAAA,AAAS,IACf,IAAM,EAAc,MAAM,ACaf,EDb0B,IAAI,CAAC,CAAC,GAAG,IAAI,CAAC,CAAE,UAAW,CAAC,CAAE,GAAG,IAAI,GAE1E,MACI,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,gBACX,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,mCAA0B,2BAExC,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,sCACX,CAAA,EAAA,EAAA,IAAA,EAAC,QAAA,CAAM,UAAU,qCACb,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CAAM,UAAU,+BACb,CAAA,EAAA,EAAA,IAAA,EAAC,KAAA,WACG,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,iDAAwC,UACtD,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,iDAAwC,WACtD,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,iDAAwC,yBAG9D,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CAAM,UAAU,oBACZ,AAAuB,MAAX,MAAM,CACf,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,UACG,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,QAAS,EAAG,UAAU,+CAAsC,0BAKpE,EAAY,GAAG,CAAC,AAAC,GACb,CAAA,EAAA,EAAA,IAAA,EAAC,KAAA,WACG,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,+CAAuC,EAAI,KAAK,GAC9D,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,qBACV,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAW,CAAC,wEAAwE,EAAiB,eAAf,EAAI,MAAM,CAAoB,8BAAgC,0BAAA,CAA2B,UAChL,EAAI,MAAM,KAGnB,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,mCACT,CAAA,EAAA,EAAA,MAAA,AAAM,EAAC,IAAI,KAAK,EAAI,SAAS,EAAG,0BARhC,EAAI,GAAG,CAAC,QAAQ,cAkBzD,kCA9CuB"}