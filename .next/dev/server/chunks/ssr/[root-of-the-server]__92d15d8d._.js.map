{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 18, "column": 0}, "map": {"version":3,"sources":["file:///Users/muhammedanshifp/Documents/kiswastore/admin/lib/mongodb.ts"],"sourcesContent":["import mongoose from 'mongoose';\n\nconst MONGODB_URI = process.env.MONGODB_URI || 'mongodb://localhost:27017/kiswastore';\n\nif (!MONGODB_URI) {\n    throw new Error('Please define the MONGODB_URI environment variable inside .env.local');\n}\n\ninterface MongooseCache {\n    conn: typeof mongoose | null;\n    promise: Promise<typeof mongoose> | null;\n}\n\ndeclare global {\n    var mongoose: MongooseCache;\n}\n\nlet cached = global.mongoose;\n\nif (!cached) {\n    cached = global.mongoose = { conn: null, promise: null };\n}\n\nasync function dbConnect() {\n    if (cached.conn) {\n        return cached.conn;\n    }\n\n    if (!cached.promise) {\n        const opts = {\n            bufferCommands: false,\n        };\n\n        cached.promise = mongoose.connect(MONGODB_URI, opts).then((mongoose) => {\n            return mongoose;\n        });\n    }\n\n    try {\n        cached.conn = await cached.promise;\n    } catch (e) {\n        cached.promise = null;\n        throw e;\n    }\n\n    return cached.conn;\n}\n\nexport default dbConnect;\n"],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM,cAAc,QAAQ,GAAG,CAAC,WAAW,IAAI;AAE/C;;AAaA,IAAI,SAAS,OAAO,QAAQ;AAE5B,IAAI,CAAC,QAAQ;IACT,SAAS,OAAO,QAAQ,GAAG;QAAE,MAAM;QAAM,SAAS;IAAK;AAC3D;AAEA,eAAe;IACX,IAAI,OAAO,IAAI,EAAE;QACb,OAAO,OAAO,IAAI;IACtB;IAEA,IAAI,CAAC,OAAO,OAAO,EAAE;QACjB,MAAM,OAAO;YACT,gBAAgB;QACpB;QAEA,OAAO,OAAO,GAAG,mKAAQ,CAAC,OAAO,CAAC,aAAa,MAAM,IAAI,CAAC,CAAC;YACvD,OAAO;QACX;IACJ;IAEA,IAAI;QACA,OAAO,IAAI,GAAG,MAAM,OAAO,OAAO;IACtC,EAAE,OAAO,GAAG;QACR,OAAO,OAAO,GAAG;QACjB,MAAM;IACV;IAEA,OAAO,OAAO,IAAI;AACtB;uCAEe"}},
    {"offset": {"line": 59, "column": 0}, "map": {"version":3,"sources":["file:///Users/muhammedanshifp/Documents/kiswastore/admin/models/Message.ts"],"sourcesContent":["import mongoose, { Schema, Document, Model } from \"mongoose\"\n\nexport interface IMessage extends Document {\n    name: string\n    email: string\n    subject: string\n    message: string\n    status: \"unread\" | \"read\" | \"replied\"\n    createdAt: Date\n}\n\nconst MessageSchema = new Schema<IMessage>(\n    {\n        name: { type: String, required: true },\n        email: { type: String, required: true },\n        subject: { type: String, required: true },\n        message: { type: String, required: true },\n        status: { type: String, enum: [\"unread\", \"read\", \"replied\"], default: \"unread\" },\n    },\n    { timestamps: true }\n)\n\n// Prevent overwriting model if already compiled\nconst Message: Model<IMessage> =\n    mongoose.models.Message || mongoose.model<IMessage>(\"Message\", MessageSchema)\n\nexport default Message\n"],"names":[],"mappings":";;;;AAAA;;AAWA,MAAM,gBAAgB,IAAI,kKAAM,CAC5B;IACI,MAAM;QAAE,MAAM;QAAQ,UAAU;IAAK;IACrC,OAAO;QAAE,MAAM;QAAQ,UAAU;IAAK;IACtC,SAAS;QAAE,MAAM;QAAQ,UAAU;IAAK;IACxC,SAAS;QAAE,MAAM;QAAQ,UAAU;IAAK;IACxC,QAAQ;QAAE,MAAM;QAAQ,MAAM;YAAC;YAAU;YAAQ;SAAU;QAAE,SAAS;IAAS;AACnF,GACA;IAAE,YAAY;AAAK;AAGvB,gDAAgD;AAChD,MAAM,UACF,mKAAQ,CAAC,MAAM,CAAC,OAAO,IAAI,mKAAQ,CAAC,KAAK,CAAW,WAAW;uCAEpD"}},
    {"offset": {"line": 101, "column": 0}, "map": {"version":3,"sources":["file:///Users/muhammedanshifp/Documents/kiswastore/admin/app/support/messages/page.tsx"],"sourcesContent":["import dbConnect from \"@/lib/mongodb\"\nimport Message from \"@/models/Message\"\nimport { format } from \"date-fns\"\n\nexport const dynamic = \"force-dynamic\"\n\nexport default async function MessagesPage() {\n    await dbConnect()\n    await dbConnect()\n    const messages = await Message.find({}).sort({ createdAt: -1 }).lean()\n\n    return (\n        <div className=\"p-8\">\n            <h1 className=\"text-3xl font-bold mb-8\">Support Messages</h1>\n\n            <div className=\"grid gap-4\">\n                {messages.length === 0 ? (\n                    <div className=\"p-8 text-center bg-white border rounded-lg text-gray-500\">\n                        No messages yet.\n                    </div>\n                ) : (\n                    messages.map((msg: any) => (\n                        <div key={msg._id.toString()} className=\"bg-white border rounded-lg p-6 hover:shadow-sm transition-shadow\">\n                            <div className=\"flex justify-between items-start mb-4\">\n                                <div>\n                                    <h3 className=\"font-bold text-lg\">{msg.subject}</h3>\n                                    <div className=\"flex items-center gap-2 text-sm text-gray-500 mt-1\">\n                                        <span className=\"font-medium text-black\">{msg.name}</span>\n                                        <span>&bull;</span>\n                                        <span>{msg.email}</span>\n                                    </div>\n                                </div>\n                                <div className=\"text-right\">\n                                    <span className={`inline-block px-2.5 py-0.5 rounded-full text-xs font-medium mb-2 ${msg.status === 'unread' ? 'bg-blue-100 text-blue-800' :\n                                        msg.status === 'replied' ? 'bg-green-100 text-green-800' : 'bg-gray-100 text-gray-800'\n                                        }`}>\n                                        {msg.status.toUpperCase()}\n                                    </span>\n                                    <p className=\"text-xs text-gray-400\">\n                                        {format(new Date(msg.createdAt), \"MMM d, yyyy h:mm a\")}\n                                    </p>\n                                </div>\n                            </div>\n                            <p className=\"text-gray-700 bg-gray-50 p-4 rounded text-sm leading-relaxed whitespace-pre-wrap\">\n                                {msg.message}\n                            </p>\n                        </div>\n                    ))\n                )}\n            </div>\n        </div>\n    )\n}\n"],"names":[],"mappings":";;;;;;;AAAA;AACA;AACA;;;;;AAEO,MAAM,UAAU;AAER,eAAe;IAC1B,MAAM,IAAA,yHAAS;IACf,MAAM,IAAA,yHAAS;IACf,MAAM,WAAW,MAAM,4HAAO,CAAC,IAAI,CAAC,CAAC,GAAG,IAAI,CAAC;QAAE,WAAW,CAAC;IAAE,GAAG,IAAI;IAEpE,qBACI,8OAAC;QAAI,WAAU;;0BACX,8OAAC;gBAAG,WAAU;0BAA0B;;;;;;0BAExC,8OAAC;gBAAI,WAAU;0BACV,SAAS,MAAM,KAAK,kBACjB,8OAAC;oBAAI,WAAU;8BAA2D;;;;;2BAI1E,SAAS,GAAG,CAAC,CAAC,oBACV,8OAAC;wBAA6B,WAAU;;0CACpC,8OAAC;gCAAI,WAAU;;kDACX,8OAAC;;0DACG,8OAAC;gDAAG,WAAU;0DAAqB,IAAI,OAAO;;;;;;0DAC9C,8OAAC;gDAAI,WAAU;;kEACX,8OAAC;wDAAK,WAAU;kEAA0B,IAAI,IAAI;;;;;;kEAClD,8OAAC;kEAAK;;;;;;kEACN,8OAAC;kEAAM,IAAI,KAAK;;;;;;;;;;;;;;;;;;kDAGxB,8OAAC;wCAAI,WAAU;;0DACX,8OAAC;gDAAK,WAAW,CAAC,iEAAiE,EAAE,IAAI,MAAM,KAAK,WAAW,8BAC3G,IAAI,MAAM,KAAK,YAAY,gCAAgC,6BACzD;0DACD,IAAI,MAAM,CAAC,WAAW;;;;;;0DAE3B,8OAAC;gDAAE,WAAU;0DACR,IAAA,+JAAM,EAAC,IAAI,KAAK,IAAI,SAAS,GAAG;;;;;;;;;;;;;;;;;;0CAI7C,8OAAC;gCAAE,WAAU;0CACR,IAAI,OAAO;;;;;;;uBAtBV,IAAI,GAAG,CAAC,QAAQ;;;;;;;;;;;;;;;;AA8BlD"}}]
}