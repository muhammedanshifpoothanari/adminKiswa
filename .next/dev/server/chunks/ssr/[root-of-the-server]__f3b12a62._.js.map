{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 18, "column": 0}, "map": {"version":3,"sources":["file:///Users/muhammedanshifp/Documents/kiswastore/admin/lib/mongodb.ts"],"sourcesContent":["import mongoose from 'mongoose';\n\nconst MONGODB_URI = process.env.MONGODB_URI || 'mongodb://localhost:27017/kiswastore';\n\nif (!MONGODB_URI) {\n    throw new Error('Please define the MONGODB_URI environment variable inside .env.local');\n}\n\ninterface MongooseCache {\n    conn: typeof mongoose | null;\n    promise: Promise<typeof mongoose> | null;\n}\n\ndeclare global {\n    var mongoose: MongooseCache;\n}\n\nlet cached = global.mongoose;\n\nif (!cached) {\n    cached = global.mongoose = { conn: null, promise: null };\n}\n\nasync function dbConnect() {\n    if (cached.conn) {\n        return cached.conn;\n    }\n\n    if (!cached.promise) {\n        const opts = {\n            bufferCommands: false,\n        };\n\n        cached.promise = mongoose.connect(MONGODB_URI, opts).then((mongoose) => {\n            return mongoose;\n        });\n    }\n\n    try {\n        cached.conn = await cached.promise;\n    } catch (e) {\n        cached.promise = null;\n        throw e;\n    }\n\n    return cached.conn;\n}\n\nexport default dbConnect;\n"],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM,cAAc,QAAQ,GAAG,CAAC,WAAW,IAAI;AAE/C;;AAaA,IAAI,SAAS,OAAO,QAAQ;AAE5B,IAAI,CAAC,QAAQ;IACT,SAAS,OAAO,QAAQ,GAAG;QAAE,MAAM;QAAM,SAAS;IAAK;AAC3D;AAEA,eAAe;IACX,IAAI,OAAO,IAAI,EAAE;QACb,OAAO,OAAO,IAAI;IACtB;IAEA,IAAI,CAAC,OAAO,OAAO,EAAE;QACjB,MAAM,OAAO;YACT,gBAAgB;QACpB;QAEA,OAAO,OAAO,GAAG,mKAAQ,CAAC,OAAO,CAAC,aAAa,MAAM,IAAI,CAAC,CAAC;YACvD,OAAO;QACX;IACJ;IAEA,IAAI;QACA,OAAO,IAAI,GAAG,MAAM,OAAO,OAAO;IACtC,EAAE,OAAO,GAAG;QACR,OAAO,OAAO,GAAG;QACjB,MAAM;IACV;IAEA,OAAO,OAAO,IAAI;AACtB;uCAEe"}},
    {"offset": {"line": 59, "column": 0}, "map": {"version":3,"sources":["file:///Users/muhammedanshifp/Documents/kiswastore/admin/models/Subscriber.ts"],"sourcesContent":["import mongoose, { Schema, Document, Model } from \"mongoose\"\n\nexport interface ISubscriber extends Document {\n    email: string\n    status: \"subscribed\" | \"unsubscribed\"\n    subscribedAt: Date\n}\n\nconst SubscriberSchema = new Schema<ISubscriber>(\n    {\n        email: { type: String, required: true, unique: true },\n        status: { type: String, enum: [\"subscribed\", \"unsubscribed\"], default: \"subscribed\" },\n        subscribedAt: { type: Date, default: Date.now },\n    },\n    { timestamps: true }\n)\n\n// Prevent overwriting model if already compiled\nconst Subscriber: Model<ISubscriber> =\n    mongoose.models.Subscriber || mongoose.model<ISubscriber>(\"Subscriber\", SubscriberSchema)\n\nexport default Subscriber\n"],"names":[],"mappings":";;;;AAAA;;AAQA,MAAM,mBAAmB,IAAI,kKAAM,CAC/B;IACI,OAAO;QAAE,MAAM;QAAQ,UAAU;QAAM,QAAQ;IAAK;IACpD,QAAQ;QAAE,MAAM;QAAQ,MAAM;YAAC;YAAc;SAAe;QAAE,SAAS;IAAa;IACpF,cAAc;QAAE,MAAM;QAAM,SAAS,KAAK,GAAG;IAAC;AAClD,GACA;IAAE,YAAY;AAAK;AAGvB,gDAAgD;AAChD,MAAM,aACF,mKAAQ,CAAC,MAAM,CAAC,UAAU,IAAI,mKAAQ,CAAC,KAAK,CAAc,cAAc;uCAE7D"}},
    {"offset": {"line": 93, "column": 0}, "map": {"version":3,"sources":["file:///Users/muhammedanshifp/Documents/kiswastore/admin/app/customers/subscribers/page.tsx"],"sourcesContent":["import dbConnect from \"@/lib/mongodb\"\nimport Subscriber from \"@/models/Subscriber\"\nimport { format } from \"date-fns\"\n\nexport const dynamic = \"force-dynamic\"\n\nexport default async function SubscribersPage() {\n    await dbConnect()\n    const subscribers = await Subscriber.find({}).sort({ createdAt: -1 }).lean()\n\n    return (\n        <div className=\"p-8\">\n            <h1 className=\"text-3xl font-bold mb-8\">Newsletter Subscribers</h1>\n\n            <div className=\"bg-white rounded-lg border\">\n                <table className=\"w-full text-left text-sm\">\n                    <thead className=\"bg-gray-50 border-b\">\n                        <tr>\n                            <th className=\"px-6 py-4 font-semibold text-gray-900\">Email</th>\n                            <th className=\"px-6 py-4 font-semibold text-gray-900\">Status</th>\n                            <th className=\"px-6 py-4 font-semibold text-gray-900\">Date Subscribed</th>\n                        </tr>\n                    </thead>\n                    <tbody className=\"divide-y\">\n                        {subscribers.length === 0 ? (\n                            <tr>\n                                <td colSpan={3} className=\"px-6 py-8 text-center text-gray-500\">\n                                    No subscribers yet.\n                                </td>\n                            </tr>\n                        ) : (\n                            subscribers.map((sub: any) => (\n                                <tr key={sub._id.toString()}>\n                                    <td className=\"px-6 py-4 font-medium text-gray-900\">{sub.email}</td>\n                                    <td className=\"px-6 py-4\">\n                                        <span className={`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${sub.status === 'subscribed' ? 'bg-green-100 text-green-800' : 'bg-red-100 text-red-800'}`}>\n                                            {sub.status}\n                                        </span>\n                                    </td>\n                                    <td className=\"px-6 py-4 text-gray-500\">\n                                        {format(new Date(sub.createdAt), \"MMM d, yyyy h:mm a\")}\n                                    </td>\n                                </tr>\n                            ))\n                        )}\n                    </tbody>\n                </table>\n            </div>\n        </div>\n    )\n}\n"],"names":[],"mappings":";;;;;;;AAAA;AACA;AACA;;;;;AAEO,MAAM,UAAU;AAER,eAAe;IAC1B,MAAM,IAAA,yHAAS;IACf,MAAM,cAAc,MAAM,+HAAU,CAAC,IAAI,CAAC,CAAC,GAAG,IAAI,CAAC;QAAE,WAAW,CAAC;IAAE,GAAG,IAAI;IAE1E,qBACI,8OAAC;QAAI,WAAU;;0BACX,8OAAC;gBAAG,WAAU;0BAA0B;;;;;;0BAExC,8OAAC;gBAAI,WAAU;0BACX,cAAA,8OAAC;oBAAM,WAAU;;sCACb,8OAAC;4BAAM,WAAU;sCACb,cAAA,8OAAC;;kDACG,8OAAC;wCAAG,WAAU;kDAAwC;;;;;;kDACtD,8OAAC;wCAAG,WAAU;kDAAwC;;;;;;kDACtD,8OAAC;wCAAG,WAAU;kDAAwC;;;;;;;;;;;;;;;;;sCAG9D,8OAAC;4BAAM,WAAU;sCACZ,YAAY,MAAM,KAAK,kBACpB,8OAAC;0CACG,cAAA,8OAAC;oCAAG,SAAS;oCAAG,WAAU;8CAAsC;;;;;;;;;;uCAKpE,YAAY,GAAG,CAAC,CAAC,oBACb,8OAAC;;sDACG,8OAAC;4CAAG,WAAU;sDAAuC,IAAI,KAAK;;;;;;sDAC9D,8OAAC;4CAAG,WAAU;sDACV,cAAA,8OAAC;gDAAK,WAAW,CAAC,wEAAwE,EAAE,IAAI,MAAM,KAAK,eAAe,gCAAgC,2BAA2B;0DAChL,IAAI,MAAM;;;;;;;;;;;sDAGnB,8OAAC;4CAAG,WAAU;sDACT,IAAA,+JAAM,EAAC,IAAI,KAAK,IAAI,SAAS,GAAG;;;;;;;mCARhC,IAAI,GAAG,CAAC,QAAQ;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkBzD"}}]
}